# Run full build and tests before pushing
echo "ğŸ—ï¸  Running pre-push checks..."

# Clean build to ensure everything compiles
echo "ğŸ§¹ Cleaning previous builds..."
bun run clean:build

# Build all packages in correct order
echo "ğŸ“¦ Building packages..."
bun run build
if [ $? -ne 0 ]; then
  echo "âŒ Build failed"
  exit 1
fi

# Final health check
echo "ğŸ¥ Running health check..."
bun run health-check
if [ $? -ne 0 ]; then
  echo "âŒ Health check failed"
  exit 1
fi

echo "âœ… All pre-push checks passed!"